---
# This playbook deploys the cloudbox on a minimal installation.

- name: apply configuration to the cloudbox
  hosts: cloudboxes
  remote_user: ansible
  become: yes
  vars:
    if_lan: "enp1s0"
    ipaddr: "192.168.2.50/24"
    gateway: "192.168.2.1"
    DNS: "192.168.2.1"
    #ddns_domain: "something.ddnss.de"
    ddns_domain: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          30653335326332666539326461623064383432653133383832313065386231663366383862393961
          3339356432643139653939323832633839626631396431340a623438333335333765383035666133
          34313631663938386432326665313331383865616361633465336333613534626262633864613133
          3934376631343736380a353337303937656638633035666331646563326562363130633534376335
          6636
    #ddns_updkey: "138638.some.key.here.635620"
    ddns_updkey: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35333062366532643235343839313962393038313631663239336138393566643433326535313132
          3761303730653339616333623534343131333838303036310a343634623739623663623566336233
          37666466356363646464323335643261346563643564333631626432323963396136643039336531
          3662653436373564310a663061613032343332373031613831343365643039313034353636613938
          31663437393564656334663336633234666237386662323661623266396166616235306531333861
          3831656434613434333337376262396631363336643766323932
  roles:
    - up2date-debian
    - systemd-networkd
    - web-server
    - ddns-update
    - low-power
